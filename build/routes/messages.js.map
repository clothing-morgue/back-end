{"version":3,"sources":["../../src/routes/messages.js"],"names":["router","get","req","res","send","Object","values","context","models","messages","params","messageId","post","id","message","text","body","userId","me","otherMessages"],"mappings":";;;;;;;AAAA;;AACA;;;;;;;;;;;;;;AAEA,IAAMA,MAAM,GAAG,sBAAf;AAEAA,MAAM,CAACC,GAAP,CAAW,GAAX,EAAgB,UAACC,GAAD,EAAMC,GAAN,EAAc;AAC5B,SAAOA,GAAG,CAACC,IAAJ,CAASC,MAAM,CAACC,MAAP,CAAcJ,GAAG,CAACK,OAAJ,CAAYC,MAAZ,CAAmBC,QAAjC,CAAT,CAAP;AACD,CAFD;AAIAT,MAAM,CAACC,GAAP,CAAW,aAAX,EAA0B,UAACC,GAAD,EAAMC,GAAN,EAAc;AACtC,SAAOA,GAAG,CAACC,IAAJ,CAASF,GAAG,CAACK,OAAJ,CAAYC,MAAZ,CAAmBC,QAAnB,CAA4BP,GAAG,CAACQ,MAAJ,CAAWC,SAAvC,CAAT,CAAP;AACD,CAFD;AAIAX,MAAM,CAACY,IAAP,CAAY,GAAZ,EAAiB,UAACV,GAAD,EAAMC,GAAN,EAAc;AAC7B,MAAMU,EAAE,GAAG,oBAAX;AACA,MAAMC,OAAO,GAAG;AACdD,IAAAA,EAAE,EAAFA,EADc;AAEdE,IAAAA,IAAI,EAAEb,GAAG,CAACc,IAAJ,CAASD,IAFD;AAGdE,IAAAA,MAAM,EAAEf,GAAG,CAACK,OAAJ,CAAYW,EAAZ,CAAeL;AAHT,GAAhB;AAMAX,EAAAA,GAAG,CAACK,OAAJ,CAAYC,MAAZ,CAAmBC,QAAnB,CAA4BI,EAA5B,IAAkCC,OAAlC;AAEA,SAAOX,GAAG,CAACC,IAAJ,CAASU,OAAT,CAAP;AACD,CAXD;AAaAd,MAAM,UAAN,CAAc,aAAd,EAA6B,UAACE,GAAD,EAAMC,GAAN,EAAc;AAAA,8BAIrCD,GAAG,CAACK,OAAJ,CAAYC,MAAZ,CAAmBC,QAJkB;AAAA,8BAEtCP,GAAG,CAACQ,MAAJ,CAAWC,SAF2B;AAAA,MAEfG,OAFe;AAAA,MAGpCK,aAHoC;;AAMzCjB,EAAAA,GAAG,CAACK,OAAJ,CAAYC,MAAZ,CAAmBC,QAAnB,GAA8BU,aAA9B;AAEA,SAAOhB,GAAG,CAACC,IAAJ,CAASU,OAAT,CAAP;AACD,CATD;eAWed,M","sourcesContent":["import uuidv4 from \"uuid/v4\";\r\nimport { Router } from \"express\";\r\n\r\nconst router = Router();\r\n\r\nrouter.get(\"/\", (req, res) => {\r\n  return res.send(Object.values(req.context.models.messages));\r\n});\r\n\r\nrouter.get(\"/:messageId\", (req, res) => {\r\n  return res.send(req.context.models.messages[req.params.messageId]);\r\n});\r\n\r\nrouter.post(\"/\", (req, res) => {\r\n  const id = uuidv4();\r\n  const message = {\r\n    id,\r\n    text: req.body.text,\r\n    userId: req.context.me.id\r\n  };\r\n\r\n  req.context.models.messages[id] = message;\r\n\r\n  return res.send(message);\r\n});\r\n\r\nrouter.delete(\"/:messageId\", (req, res) => {\r\n  const {\r\n    [req.params.messageId]: message,\r\n    ...otherMessages\r\n  } = req.context.models.messages;\r\n\r\n  req.context.models.messages = otherMessages;\r\n\r\n  return res.send(message);\r\n});\r\n\r\nexport default router;\r\n"],"file":"messages.js"}